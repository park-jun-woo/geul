<header class="site-header">
  <div class="site-header-inner">
    <a class="site-logo" href="{{ "/" | relLangURL }}">GEUL</a>
    <nav class="site-nav">
      {{ range .Site.Menus.main }}
        {{ if .HasChildren }}
        <div class="nav-dropdown">
          <button class="nav-dropdown-toggle">{{ .Name }} <span class="nav-arrow">&#9662;</span></button>
          <ul class="nav-dropdown-menu">
            {{ range .Children }}
            <li><a href="{{ .URL }}">{{ .Name }}</a></li>
            {{ end }}
          </ul>
        </div>
        {{ else }}
        <a href="{{ .URL }}"{{ if $.IsMenuCurrent "main" . }} class="active"{{ end }}>{{ .Name }}</a>
        {{ end }}
      {{ end }}
    </nav>
    <a class="site-lang-link" href="{{ "languages/" | relLangURL }}">
      <span class="site-lang-code">{{ upper .Lang }}</span>
    </a>
    <button class="nav-toggle" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</header>
<div class="nav-overlay"></div>
<script>
(function() {
  var btn = document.querySelector('.nav-toggle');
  var nav = document.querySelector('.site-nav');
  var overlay = document.querySelector('.nav-overlay');
  function toggle() {
    var opening = !nav.classList.contains('open');
    btn.classList.toggle('open');
    nav.classList.toggle('open');
    overlay.classList.toggle('open');
    if (opening) {
      var dd = nav.querySelectorAll('.nav-dropdown');
      for (var j = 0; j < dd.length; j++) dd[j].classList.add('open');
    }
  }
  btn.addEventListener('click', toggle);
  overlay.addEventListener('click', toggle);

  var dropdowns = document.querySelectorAll('.nav-dropdown-toggle');
  for (var i = 0; i < dropdowns.length; i++) {
    dropdowns[i].addEventListener('click', function(e) {
      e.preventDefault();
      this.parentElement.classList.toggle('open');
    });
  }
})();
</script>
